@font-face{font-family:iAWriterDuoS;src:url(./iAWriterDuoS-Regular-CW_LHp8r.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:iAWriterDuoS;src:url(./iAWriterDuoS-Bold-BR5v5URg.ttf) format("truetype");font-weight:700;font-style:normal;font-display:swap}@font-face{font-family:iAWriterMonoS;src:url(./iAWriterMonoS-Regular-B8put20p.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:iAWriterMonoS;src:url(./iAWriterMonoS-Bold-DHbjDDRm.ttf) format("truetype");font-weight:700;font-style:normal;font-display:swap}:root{color-scheme:light;--bg: #f3f4f6;--panel: rgba(255, 255, 255, .78);--panel-solid: #ffffff;--ink: #101316;--accent: #245a8d;--map-mode: #2ea44f;--node: #2d7aa6;--node-active: #c94b3d;--border: rgba(16, 19, 22, .15);--canvas: #fdfbf7;--muted-ink: rgba(16, 19, 22, .65);--edge: rgba(0, 0, 0, .18);--node-stroke: rgba(0, 0, 0, .35);--text-primary: #1e1e1e;--text-secondary: #2a2a2a;--font-title: "Noto Serif";--font-ratio: "Noto Serif";--font-note: "Lexend";--font-triangle-label: "Noto Serif";--font-custom-label: "Noto Serif";--font-key-mapping: "Lexend";--page: #ffffff;--page-border: rgba(16, 19, 22, .15);--page-shadow: rgba(16, 19, 22, .18);--lfo: #2f6df6;--play-fill: #f3d64d;--looper-fill: #f0bf3a;--wheel-line: #000000;--wheel-ring: #000000;--wheel-text: #000000;--left-panel-width: 180px;--left-panel-left: 16px;--left-panel-inner: 86%}@font-face{font-family:HEJI2Text;src:url(./HEJI2Text-B5Fkx4lF.otf) format("opentype");font-display:swap}*{box-sizing:border-box}body{margin:0;font-family:Lexend,Helvetica Neue,sans-serif;background:radial-gradient(circle at top left,#ffffff,var(--bg));color:var(--ink);transition:background .3s ease,color .3s ease}body:before{content:"";position:fixed;top:0;right:0;bottom:0;left:0;background:transparent;pointer-events:none;transition:background .3s ease;z-index:1}body.theme-dark{color-scheme:dark;--bg: #0c1117;--panel: rgba(18, 24, 33, .8);--panel-solid: #121821;--ink: #e8edf2;--accent: #4aa3df;--map-mode: #33c46b;--node: #59b0dd;--node-active: #f5a15b;--border: rgba(231, 237, 244, .18);--canvas: #0a0f14;--muted-ink: rgba(232, 237, 242, .72);--edge: rgba(230, 238, 246, .16);--node-stroke: rgba(230, 238, 246, .35);--text-primary: #e8edf2;--text-secondary: #b8c1cb;--page: #f9fafb;--page-border: rgba(231, 237, 244, .2);--page-shadow: rgba(0, 0, 0, .45);--lfo: #6cb7ff;--play-fill: #f3d64d;--looper-fill: #f0bf3a;--wheel-line: #f5f7fb;--wheel-ring: #f5f7fb;--wheel-text: #f5f7fb;background:var(--bg)}.app{position:relative;z-index:2;padding:0}.top-bar{display:flex;align-items:center;gap:14px;padding:0;position:relative}.title h1{margin:15px 0 5px 15px;font-size:26px;letter-spacing:.4px;font-weight:200}.title p{margin:0 0 0 18px;color:var(--muted-ink);font-size:12px;line-height:1.4}.ui-hint{margin:0;color:var(--muted-ink);font-size:12px;line-height:1.4;white-space:pre-line;cursor:pointer;width:400px;position:relative;z-index:0;pointer-events:auto}.creator{margin:0 0 6px 15px}.creator a,.creator a:visited{color:inherit}.panel{background:var(--panel);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);padding:12px 16px;border-radius:14px;border:1px solid var(--border);opacity:.25;transition:opacity .2s ease}.panel:hover,.panel:focus-within{opacity:1}.panel.panel-open{opacity:1;transition:none}.panel.panel-open:hover,.panel.panel-open:focus-within{opacity:1}.controls{flex:1;display:flex;flex-wrap:wrap;gap:10px 12px;align-items:center}.controls-wrap{display:inline-flex;flex-direction:column;align-items:flex-start;gap:6px;flex:1}.hint-row{position:fixed;left:225px;top:100px;width:400px;z-index:0;min-height:18px;pointer-events:none}.z-mode-message{position:relative;left:auto;top:auto;transform:none;text-align:left;pointer-events:auto}.control-actions,.control-actions-group{display:inline-flex;flex-wrap:wrap;gap:8px;align-items:center}.control-actions-divider{width:1px;height:22px;background:var(--border);opacity:.7}.control-group{display:grid;gap:6px}.export-check-status{font-size:11px;line-height:1.35;color:var(--text-secondary);min-height:14px}.control-group-inline{grid-template-columns:auto 1fr;align-items:center;column-gap:10px;row-gap:0}.ratios-inline{display:inline-flex;align-items:center;gap:8px;height:36px;padding:0 10px;border-radius:999px;border:1px solid var(--border);background:#fff9;box-sizing:border-box}.ratios-label{font-size:12px;letter-spacing:.2px}.ratio-axis-label{font-size:10px;letter-spacing:.8px;text-transform:uppercase;opacity:.75}.ratios-inline select{height:24px;padding:2px 8px;font-size:12px;border-radius:8px}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.control-inline{display:flex;gap:8px;align-items:center}.fundamental-inline{gap:6px}.inline-label{font-size:11px;letter-spacing:.2px;color:var(--muted-ink)}.fundamental-spelling-actions{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}.control-readout{font-size:11px;color:var(--muted-ink)}.arrow-sep{font-size:12px;color:var(--muted-ink)}.radio-row{display:flex;flex-wrap:wrap;gap:8px 12px;align-items:center;font-size:13px}.radio-row label{display:flex;gap:6px;align-items:center}.radio-option{display:inline-flex;align-items:center;gap:6px;font-size:12px}label{font-size:13px;letter-spacing:.2px}input[type=number],select{flex:1;padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:#fff;font-size:14px}body.theme-dark input[type=number],body.theme-dark select{background:#0f151d;color:#fff;border-color:#fff}body.theme-dark .ratios-inline{background:#0f151d99}.button-ghost{background:transparent;border:1px solid var(--border);color:var(--ink)}.button-ghost:hover,.button-ghost:focus{border-color:var(--accent);color:var(--accent)}.narrow-select{max-width:110px}input[type=range]{width:100%}#ratio-wheel-mini{width:36px;height:36px}#volume-readout{font-size:12px;opacity:.75}button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:var(--accent);color:#fff;padding:10px 16px;border-radius:999px;font-size:14px;cursor:pointer}button:active{transform:translateY(1px)}.button-on{background:#f2c94c;color:#1a1a1a}.button-on:active{transform:translateY(1px)}.nav-3d{position:fixed;top:100px;left:var(--left-panel-left);width:var(--left-panel-width);z-index:9}.nav-3d[hidden],#nav-3d[data-mode="2d"] [data-nav-mode="3d"],#nav-3d[data-mode="3d"] [data-nav-mode="2d"]{display:none}.nav-3d-panel{display:grid;gap:12px;max-height:calc(100vh - 140px);overflow:auto;--panel-inner-width: var(--left-panel-inner)}.nav-3d-header{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;background:transparent;border:1px solid rgba(0,0,0,.15);border-radius:12px;font-size:12px;text-transform:uppercase;letter-spacing:.4px;cursor:pointer}.nav-3d-chevron{font-size:12px;transition:transform .2s ease}.nav-3d-content{display:grid;gap:12px}.nav-3d-content>*{width:var(--panel-inner-width);justify-self:center}.nav-3d-content .control-group,.nav-3d-content .control-inline,.nav-3d-content .nav-3d-buttons{width:100%;min-width:0}.nav-3d-panel.is-collapsed .nav-3d-content{display:none}.nav-3d-panel.is-collapsed .nav-3d-chevron{transform:rotate(-90deg)}.nav-3d-section{display:grid;gap:8px}.nav-3d-title{font-size:12px;letter-spacing:.4px;text-transform:uppercase;opacity:.7}.nav-3d-accordion-toggle{display:flex;align-items:center;justify-content:space-between;gap:8px;width:100%;padding:0;background:none;border:0;font-size:12px;letter-spacing:.4px;text-transform:uppercase;opacity:.7;cursor:pointer}.nav-3d-accordion-chevron{transition:transform .2s ease}.nav-3d-accordion-toggle.is-collapsed .nav-3d-accordion-chevron{transform:rotate(-90deg)}.nav-3d-accordion-body[hidden]{display:none}.nav-3d-buttons{display:grid;grid-template-columns:repeat(2,1fr);gap:6px}.nav-3d-subsection{display:grid;gap:6px}.nav-3d-subtitle{font-size:10px;letter-spacing:.2px;text-transform:uppercase;opacity:.55}.nav-3d button{background:transparent;color:var(--ink);border:1px solid var(--border);padding:6px 8px;border-radius:10px;font-size:12px}.nav-3d-view-modes{display:grid;grid-template-columns:repeat(3,1fr);gap:0}.nav-3d-toggle-buttons{display:grid;grid-template-columns:repeat(2,1fr);gap:0}.nav-3d-toggle-buttons-3{grid-template-columns:repeat(3,1fr)}.nav-3d-view-modes button,.nav-3d-toggle-buttons button{background:transparent;color:var(--ink);border:1px solid var(--border);padding:6px 8px;font-size:12px;border-radius:0}.nav-3d-view-modes button:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px}.nav-3d-view-modes button:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px}.nav-3d-view-modes button+button{margin-left:-1px}.nav-3d-toggle-buttons button:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px}.nav-3d-toggle-buttons button:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px}.nav-3d-toggle-buttons button+button{margin-left:-1px}.nav-3d-view-modes button.is-active,.nav-3d-toggle-buttons button.is-active{background:var(--accent);color:#fff;border-color:var(--accent);position:relative;z-index:1}.nav-3d-toggle{display:flex;gap:6px;align-items:center;font-size:13px}.nav-3d-toggle-small{font-size:12px}.ratio-wheel-button{padding:6px;border-radius:999px;background:transparent;border:1px solid var(--border)}.ratio-wheel-toggle{position:relative;display:inline-flex}.ratio-wheel-panel{position:fixed;left:var(--ratio-wheel-left, 24px);top:var(--ratio-wheel-top, 120px);width:min(420px,90vw);display:grid;gap:12px;z-index:3}.ratio-wheel-panel[hidden]{display:none}.ratio-wheel-panel-header{font-size:14px;font-weight:500}.ratio-wheel-panel canvas{width:min(420px,100%);height:auto;max-height:min(70vh,560px);margin:0 auto}.options-toggle{position:relative}.options-toggle button{display:inline-flex;align-items:center;gap:8px}.options-panel{position:absolute;top:calc(100% + 8px);left:-120px;min-width:220px;padding:18px;display:grid;gap:12px;z-index:3}.options-panel[hidden]{display:none}.options-panel .control-group{display:grid;gap:6px}.options-panel button{justify-self:start}.options-panel .button-full,.file-panel .button-full{justify-self:stretch;width:100%;display:flex;align-items:center;justify-content:center}.layout-float{position:fixed;top:100px;left:var(--left-panel-left);width:min(var(--left-panel-width),100%);--panel-inner-width: var(--left-panel-inner);z-index:3;display:grid;gap:10px;max-height:calc(100vh - 140px);overflow:auto;overflow-x:hidden}.layout-float[hidden]{display:none}.layout-header{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 12px;background:transparent;color:var(--ink);border:1px solid rgba(0,0,0,.15);border-radius:12px;font-size:12px;text-transform:uppercase;letter-spacing:.4px;cursor:pointer}.layout-chevron{font-size:12px;transition:transform .2s ease}.layout-content{display:grid;gap:8px}.layout-content>*{width:var(--panel-inner-width);justify-self:center}.layout-float.is-collapsed .layout-content{display:none}.layout-float.is-collapsed .layout-chevron{transform:rotate(-90deg)}.layout-header{font-weight:400}.layout-float .button-full{width:100%;display:flex;align-items:center;justify-content:center}.layout-float label{font-size:12px;letter-spacing:.4px;opacity:.7}.layout-float label[for=layout-unify-size]{font-size:12px;letter-spacing:.4px;text-transform:uppercase;opacity:.7}.layout-float .control-inline,.layout-float .control-inline span,.layout-float .control-inline label{font-size:11px;letter-spacing:0;text-transform:none;opacity:1}.layout-float .control-inline{flex-wrap:wrap}.layout-float input[type=number],.layout-float select{width:100%;padding:6px 8px;font-size:12px}.layout-float input[type=range]{width:100%}.layout-float button{padding:6px 8px;font-size:12px}.layout-float .control-inline button{flex:1 1 72px}.layout-float .control-readout{font-size:10px}.layout-float input,.layout-float select,.layout-float button{max-width:100%;box-sizing:border-box}.layout-space-group{position:relative}.layout-space-trigger{cursor:pointer}.layout-space-trigger:hover,.layout-space-trigger:focus-visible{opacity:1}.layout-space-popover{position:absolute;top:calc(100% + 6px);left:0;width:100%;display:grid;gap:6px;padding:8px;border-radius:10px;background:var(--panel);border:1px solid var(--border);box-shadow:0 10px 24px #00000026;z-index:5}.layout-space-popover[hidden]{display:none}.layout-font-popover{position:fixed;top:100px;right:var(--left-panel-left);width:280px;max-height:calc(100vh - 48px);overflow:auto;padding:12px;border-radius:12px;background:var(--panel-solid);border:1px solid var(--border);box-shadow:0 14px 30px #0000002e;z-index:12}.layout-font-popover[hidden]{display:none}.layout-font-form{display:grid;gap:12px}.layout-font-form label{display:grid;gap:8px;font-size:12px}.layout-font-controls{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}.layout-font-popover select{padding:4px 6px;border-radius:8px}.layout-font-size{display:grid;grid-template-columns:88px 1fr;gap:8px;align-items:center;font-size:11px;letter-spacing:.2px;opacity:.85}.layout-font-actions{display:flex;justify-content:flex-end;gap:8px}.layout-key-mapping-group{position:relative}.layout-key-mapping-trigger{cursor:pointer}.layout-key-mapping-trigger:hover,.layout-key-mapping-trigger:focus-visible{opacity:1}.layout-key-mapping-popover{background:var(--panel-solid)}.layout-key-mapping-popover .layout-space-row{grid-template-columns:60px 1fr}.layout-space-row{display:grid;grid-template-columns:16px 1fr;gap:6px;align-items:center}.layout-space-row label{font-size:11px;letter-spacing:.2px;opacity:.8}.preset-toggle{position:relative}.preset-toggle button{display:inline-flex;align-items:center;gap:8px}.file-toggle{position:relative}.file-toggle button{display:inline-flex;align-items:center;gap:8px}.preset-panel{position:absolute;top:calc(100% + 8px);left:0;min-width:220px;z-index:3;display:grid;gap:8px}.preset-panel[hidden]{display:none}.file-panel{position:absolute;top:calc(100% + 8px);left:0;min-width:200px;z-index:3;display:grid;gap:8px;overflow:visible}.file-panel[hidden]{display:none}.file-panel .file-share-popover{position:absolute;top:0;left:calc(100% + 8px);min-width:220px;padding:10px 12px;font-size:12px;line-height:1.3;opacity:1;background:var(--panel-solid);box-shadow:0 12px 24px #0000001f;pointer-events:none}.file-share-popover[hidden]{display:none}.preset-list{list-style:none;padding:0;margin:0;display:grid;gap:6px;font-size:13px}.preset-list a{color:inherit;text-decoration:none}.preset-list a:hover,.preset-list a:focus{color:var(--accent)}.preset-empty{color:var(--muted-ink)}.chevron{display:inline-block;transition:transform .2s ease}.options-toggle button[aria-expanded=true] .chevron,.preset-toggle button[aria-expanded=true] .chevron,.file-toggle button[aria-expanded=true] .chevron{transform:rotate(180deg)}.synth-panel{position:fixed;left:24px;right:24px;bottom:24px;z-index:2;display:flex;flex-wrap:wrap;align-items:center;gap:10px;padding:8px 14px;border-radius:999px}.synth-panel[hidden]{display:none}.synth-group{display:grid;gap:6px}.synth-group:has(#keyboard-help){position:relative}.synth-panel .synth-group{display:flex;gap:8px;align-items:center;min-width:0}.synth-panel label{font-size:11px;letter-spacing:.3px;text-transform:uppercase;color:var(--muted-ink)}.synth-panel #volume-readout,.synth-panel #lfo-depth-readout,.synth-panel .control-readout{font-size:10px;opacity:.8}.synth-panel select,.synth-panel input[type=number]{padding:4px 8px;border-radius:999px;font-size:12px}.synth-panel input[type=range]{height:14px}.synth-panel input[type=range]{min-width:140px}.synth-panel button{padding:6px 12px;font-size:12px}.keyboard-mode-row{display:grid;grid-template-columns:minmax(160px,1fr) auto auto;gap:8px;align-items:center}.keyboard-mode-row select{min-width:180px}.keyboard-mode-row button{white-space:nowrap}.midi-menu{position:relative}.midi-menu-panel{position:absolute;bottom:calc(100% + 8px);top:auto;right:0;min-width:220px;padding:14px;display:grid;gap:12px;z-index:4}.midi-menu-panel[hidden]{display:none}.midi-menu-panel .control-group{display:grid;gap:6px}.keyboard-map-button{height:28px;padding:0 10px;font-size:12px;font-weight:600}.keyboard-mode-row button.is-active{border-color:var(--button-active-border);background:var(--button-active-bg);color:var(--button-active-text)}.keyboard-map-button.is-active{border-color:var(--map-mode);background:color-mix(in srgb,var(--map-mode) 22%,transparent);color:var(--map-mode)}body.map-mode-active #lattice{box-shadow:inset 0 0 0 6px color-mix(in srgb,var(--map-mode) 55%,transparent)}body.map-mode-active .keyboard-mode-row{background:color-mix(in srgb,var(--map-mode) 12%,transparent);border-radius:8px;padding:2px}body.map-mode-active:before{background:color-mix(in srgb,var(--map-mode) 8%,transparent)}.keyboard-help{position:absolute;left:0;bottom:calc(100% + 6px);max-width:220px;padding:6px 8px;border-radius:8px;border:1px solid var(--border);background:var(--panel);font-size:11px;line-height:1.2;opacity:0;transform:translateY(4px);pointer-events:none;transition:opacity .3s ease,transform .3s ease}.keyboard-help.is-visible{opacity:1;transform:translateY(0)}.keyboard-map-popover{position:absolute;left:0;bottom:calc(100% + 8px);width:240px;padding:10px;border-radius:10px;border:1px solid var(--border);background:var(--panel);box-shadow:0 12px 24px #0000001f;z-index:3}.keyboard-map-clear-link{display:inline-flex;align-items:center;gap:6px;margin-top:6px;padding:0;border:0;background:transparent;color:var(--text-secondary);font-size:11px;text-transform:lowercase;cursor:pointer}.keyboard-map-clear-link:hover{color:var(--text-primary)}.keyboard-map-popover[hidden]{display:none}.piano-keys{position:relative;display:block;height:86px;margin-bottom:10px}.piano-keys-white{display:flex;height:100%;gap:4px}.piano-keys-black{position:absolute;top:0;left:0;height:52px;width:100%;pointer-events:none}.piano-key{border:1px solid var(--border);border-radius:6px;padding:0;font-size:10px;font-family:Lexend,sans-serif;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease,background .12s ease}.piano-key.white{flex:1;background:#fff;color:var(--text-primary);box-shadow:inset 0 -2px #0000001f}.piano-key.black{position:absolute;top:0;left:calc(var(--key-pos) * 100% / 7 - 10px);width:20px;height:52px;background:#1b1b1b;color:#f5f5f5;border-color:#0009;border-radius:4px;pointer-events:auto;box-shadow:inset 0 -2px #ffffff1f}.piano-key.is-unmapped{background:#fff;border-color:var(--border)}.piano-key.black.is-unmapped{background:#1b1b1b;border-color:#0009;color:#f5f5f5}.piano-key.is-mapped{background:color-mix(in srgb,var(--map-mode) 18%,#ffffff);border-color:var(--border)}.piano-key.black.is-mapped{background:color-mix(in srgb,var(--map-mode) 22%,#1b1b1b);border-color:#0009}.piano-key.is-selected{background:color-mix(in srgb,var(--map-mode) 45%,#ffffff);border-color:var(--map-mode);box-shadow:0 0 0 2px color-mix(in srgb,var(--map-mode) 70%,transparent)}.piano-key.black.is-selected{background:color-mix(in srgb,var(--map-mode) 55%,#1b1b1b);border-color:var(--map-mode);color:#fff}.piano-key:active{transform:translateY(1px)}.synth-group.is-disabled{opacity:.45}.synth-group.is-disabled input,.synth-group.is-disabled select,.synth-group.is-disabled button{pointer-events:none}.control-note{font-size:10px;color:var(--muted-ink);letter-spacing:.2px}.looper-label{display:inline-flex;align-items:center;gap:8px}.looper-clear{background:none;border:none;padding:0;font-size:12px;color:var(--muted-ink);text-decoration:underline;cursor:pointer}.looper-clear:hover,.looper-clear:focus{color:var(--accent)}.lfo-label{display:inline-flex;align-items:center;gap:8px}.lfo-stop{background:none;border:none;padding:0;font-size:12px;color:var(--muted-ink);text-decoration:underline;cursor:pointer}.lfo-stop:hover,.lfo-stop:focus{color:var(--accent)}.all-notes-off{background:none;border:none;padding:0;font-size:12px;color:var(--muted-ink);text-decoration:underline;cursor:pointer;justify-self:start}.all-notes-off:hover,.all-notes-off:focus{color:var(--accent)}.animation-toggle,.envelope-toggle{justify-self:end;align-self:center}.animation-panel{position:fixed;right:24px;bottom:140px;width:min(240px,80vw);display:grid;gap:12px;z-index:3}.animation-section{display:grid;gap:10px}.animation-section-title{display:flex;align-items:center;justify-content:space-between;font-size:12px;text-transform:uppercase;letter-spacing:.8px;color:var(--muted-ink)}.envelope-panel{position:fixed;right:24px;bottom:140px;width:min(260px,80vw);display:grid;gap:12px;z-index:3}.animation-panel[hidden],.envelope-panel[hidden]{display:none}.animation-panel-header{font-size:14px;font-weight:500}.custom-ratio-dialog{border:none;border-radius:16px;padding:18px 20px;width:min(320px,90vw);background:var(--panel);color:var(--ink)}.custom-ratio-dialog::backdrop{background:#0a0f1473}.custom-ratio-form{display:grid;gap:12px}.custom-ratio-form label{display:grid;gap:6px;font-size:12px}.custom-ratio-form input{width:100%}.dialog-title{font-size:14px;font-weight:600}.dialog-actions{display:flex;justify-content:flex-end;gap:8px;margin:0;padding:0}.dialog-help{font-size:11px;color:var(--ink-muted)}.dialog-actions button{font-size:12px}.envelope-panel-header{font-size:14px;font-weight:500}#lattice{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:var(--canvas);z-index:0}@media (max-width: 720px){.top-bar{flex-direction:column;padding-top:12px}.title{max-width:none}.title h1{font-size:22px}.control-actions-divider{display:none}}
